<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Gmail OAuth Proxy Server</title>
    <script type="text/javascript">
      // 单页应用路由处理
      // 获取当前路径
      var path = window.location.pathname;
      var search = window.location.search;
      var hash = window.location.hash;
      
      // 检测部署环境
      var hostname = window.location.hostname;
      var isGitHubPages = hostname === 'cc11001100.github.io';
      var isCustomDomain = hostname === 'www.cc11001100.com' || hostname === 'cc11001100.com';
      
      // 构建目标URL
      var targetUrl;
      if (isGitHubPages) {
        // GitHub Pages环境：需要基础路径
        var basePath = '/gmail-oauth-proxy-server';
        if (path === '/') {
          targetUrl = basePath + '/';
        } else if (!path.startsWith(basePath)) {
          targetUrl = basePath + path + search + hash;
        } else {
          targetUrl = path + search + hash;
        }
      } else if (isCustomDomain) {
        // 自定义域名环境：不需要基础路径
        targetUrl = path + search + hash;
      } else {
        // 开发环境
        targetUrl = path + search + hash;
      }
      
      // 重定向到正确的URL
      window.location.replace(targetUrl);
    </script>
  </head>
  <body>
    <p>正在重定向...</p>
    <p>如果页面没有自动跳转，请 <a href="/">点击这里</a></p>
  </body>
</html> 